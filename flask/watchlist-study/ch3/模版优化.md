# 模版优化

## 使用模板继承组织模板

对于模板内容重复的问题，Jinja2 提供了模板继承的支持。
这个机制和 Python 类继承非常类似：我们可以定义一个父模板，一般会称之为基模板（base template）。
基模板中包含完整的 HTML 结构和导航栏、页首、页脚等通用部分。
在子模板里，我们可以使用 extends 标签来声明继承自某个基模板。

基模板中需要在实际的子模板中追加或重写的部分则可以定义成块（block）。
块使用 block 标签创建， {% block 块名称 %} 作为开始标记，{% endblock %} 或 {% endblock 块名称 %} 作为结束标记。通过在子模板里定义一个同样名称的块，你可以向基模板的对应块位置追加或重写内容。

## 模板上下文处理函数

对于多个模板内都需要使用的变量，我们可以使用 app.context_processor 装饰器注册一个模板上下文处理函数。

```python
@app.context_processor
def inject_user():  # 函数名可以随意修改
    user = User.query.first()
    return dict(user=user)  # 需要返回字典，等同于 return {'user': user}
```
